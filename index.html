<!DOCTYPE html>
<html>
  <head>
    <title>My map</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #iiif-map {
        position: absolute;
        width: 66%;
        top: 0;
        bottom: 0;
      }

      #about {
        position: absolute;
        width: calc(34% - 10px);
        padding: 10px;
        right: 0
      }

      .h2 {
        color: black;
        font-size: 20px;
        padding: 5px;
      }

      .p {
        color: black;
        font-size: 14px;
        padding: 5px;
      }

      #current-view {
        position: absolute;
        left: 60px;
        top: 12px;
        z-index: 1000;
        background: whitesmoke;
        padding: 8px 12px;
      }

      #ui {
        position: absolute;
        width: 30%;
        bottom: 50px;
        left: 18%;
        right: 18%;
        z-index: 1000;
        background: whitesmoke;
        padding: 8px 12px;
      }
      #btn-back {
        float: left;
        margin-top: 30px
      }

      #btn-forward {
        float: right;
        margin-bottom: 30px
      }
    </style>
  </head>

  <body>
    <section>
      <div>
        <div id="iiif-map"></div>
        <div id="current-view">
          Current bounds:<br />
          <div id="current-bounds"></div>
        </div>
        <div id="ui">
          <button id="btn-back">Back</button>
          <h3 class="h3">ABOUT</h3>
          <button id="btn-forward">Forward</button>
        </div>
      </div>
      <aside id="about">
        <section>
          <h2 class="h2">ABOUT THIS MAP</h2>
          <p class="p">
            lorem ipsum lorem ipsumlorem ipsum lorem ipsum lorem ipsum lorem
            ipsum lorem ipsum lorem ipsum
          </p>
        </section>
      </aside>
    </section>

    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>

    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>

    <script src="https://cdn.rawgit.com/mejackreed/Leaflet-IIIF/v3.0.0/leaflet-iiif.js"></script>

    <script>
      const map = L.map("iiif-map", {
        center: [0, 0],
        crs: L.CRS.Simple,
        zoom: 0,
      });

      const chamizalLayer = new L.tileLayer.iiif(
        "https://iiif.digitalcommonwealth.org/iiif/2/commonwealth:0r96fn437/info.json"
      ).addTo(map);

      const backButton = $("#btn-back");
      const forwardButton = $("#btn-forward");

      let counter = 0;

      map.on("moveend", () => {
        // returns 'southwest_lng,southwest_lat,northeast_lng,northeast_lat' of current view
        const currentBounds = map.getBounds().toBBoxString();

        // output current bounds to screen
        document.getElementById("current-bounds").innerText = currentBounds;
      });

      document.getElementById("btn-forward").addEventListener("click", () => {
        map.flyToBounds([
          // title japan the target
          [-642.22, 199.27],
          [-454.97, 451.27],
        ]);
      });
      //   map.flyToBounds([ // legend
      //     [-612.37, 99.96],
      //     [-518.75, 225.96],
      //   ]);
      //   map.flyToBounds([ // top left rising sun as target
      //     [-162.81, 45.38],
      //     [-69.18, 171.38],
      //   ])
      //   map.flyToBounds([ // japan territory as yellow, other as green
      //     [-413.785, -59.73],
      //     [-39.285, 444.27],
      //   ])
      //   map.flyToBounds([ // munchuria as object of liberation
      //     [-127.965, 124.11],
      //     [-34.34, 250.11],
      //   ])
      //   map.flyToBounds([ // distance from dutch harbor and allied bases
      //     [-248.62, 361.86],
      //     [-154.96, 487.86],
      //   ])
      //   map.flyToBounds([ // tokyo as center of target. 80 represents mupltiples of 100k, noting its 8 million pop. red circles with anchors are naval bases
      //     [-350.13, 310.12],
      //     [-256.51, 436.19],
      //   ])
      //   map.flyToBounds([ // "tokyo to any point on this circle"
      //     [-536.37, 166.38],
      //     [-442.75, 292.38],
      //   ])
      //   map.flyToBounds([ // bombers circling tokyo, b26 "consolidated liberator"
      //     [-449.46, 250.47],
      //     [-355.84, 376.47],
      //   ])
      //   map.flyToBounds([ // hiroshima and nagasaki
      //     [-394.88, 181.43],
      //     [-301.26, 307.43],
      //   ])
    </script>
  </body>
</html>
